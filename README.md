# Вступительное испытание ШРИ Яндекса. Задание  2: API населения стран.
http://anna-v.github.io/yashri-2/

##Задание:
Существует API, которое умеет отвечать по трём URL: /countries, /cities и /populations. Клиентское приложение подсчитывает численность населения в Африке. Запросы друг от друга не зависят. Чтобы браузер пользователя не простаивал, клиентскому приложению важно уметь делать все три запроса одновременно. Реализацией API является функция getData(url, callback), которая принимает строку с URL запроса и функцию обратного вызова. В случае ошибки в callback первым аргументом будет передана строка ошибки, в случае успеха вторым аргументом будет передан ответ API.
Вам досталась реализация клиентского приложения, которое должно решать описанную выше задачу. Но в коде приложения есть ошибки, из-за которых фактический результат работы отличается от ожидаемого. Сам код [здесь](https://gist.github.com/verkholantsev/4d14ce053b009dac1225).
Как должно быть: приложение выводит в консоль суммарную популяцию в Африке.
Как на самом деле: приложение не выводит в консоль ничего.

Найдите ошибку в коде приложения, из-за которой реальный результат работы отличается от ожидаемого. Опишите, как эта ошибка могла возникнуть и как её избежать в будущем.
Добавьте в приложение новую возможность — диалог с пользователем. Приложение спрашивает название страны или города, а затем показывает численность населения. Для диалога можно использовать window.prompt.
Результат пришлите в виде двух ссылок: на работающий пример и на исходный код на GitHub.

##Решение:
Главная ошибка состояла в несоблюдении области видимости для переменной `request` внутри функции `callback`. Дело в том, что цикл `for` не создает отдельную область видимости, соответственно при каждой из трех итераций значение переменной просто перезаписывалось, и соответственно дело до подсчета популяции так и не доходило.
Эта проблема решается достаточно просто: достаточно создать дополнительную внешнюю функцию, в которой `request` сделать уже аргументом.
Во избежание подобных ошибок в будущем следует прежде всего помнить о соблюдении области видимости.
Однако, также стоит обратить внимание и на другие ошибки в коде, например:
* следует объявлять переменные в самом начале области видимости, чтобы избежать путаницы,
* не следует оставлять переменные вообще без объявления с помощью var - это чревато их нежелательной глобализацией;
* следует соблюдать кодстайл, аккуратность и единообразие при написании кода (camelcase в именовании переменных, к примеру). Ведь именно в запутанном спагетти-коде проще всего потерять переменную или объявить ее не там, где надо;
* а соблюдать аккуратность и не допустить досадных ошибок поможет [JSHint](http://jshint.com/).
